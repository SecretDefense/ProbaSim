<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîÆ Simulateur de Chances & Probabilit√©s</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #f9f9f9;
        }
        .container {
            max-width: 800px;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0px 4px 8px rgba(0,0,0,0.1);
        }
        label {
            display: block;
            margin: 10px 0 5px;
        }
        input {
            padding: 5px;
            width: 100%;
            box-sizing: border-box;
        }
        button {
            padding: 10px 20px;
            background: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
        }
        button:hover {
            background: #0056b3;
        }
        #resultats {
            margin-top: 20px;
        }
        .explication {
            background: #f0f8ff;
            padding: 10px;
            border-radius: 5px;
            margin-top: 20px;
        }
        #boutons-tests {
            margin-top: 20px;
            text-align: center;
        }
        .bouton-test {
            margin: 2px;
            padding: 5px 10px;
            border: 1px solid #007bff;
            border-radius: 5px;
            cursor: pointer;
            background: white;
        }
        .bouton-test:hover {
            background: #e6f0ff;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîÆ Simulateur de Chances & Probabilit√©s</h1>

        <div class="form">
            <label>N : Nombre de s√©ries de tests
                <input type="number" id="N" min="1" value="10">
            </label>

            <label>M : Nombre d‚Äôessais par s√©rie
                <input type="number" id="M" min="1" value="10000">
            </label>

            <label>k : Position sp√©ciale dans la s√©rie (1 ‚â§ k ‚â§ N)
                <input type="number" id="k" min="1" value="3">
            </label>

            <label>Facteur d‚Äôaugmentation de probabilit√© sp√©ciale
                <input type="number" id="facteur" step="0.1" value="1">
            </label>

            <button onclick="lancerSimulation()">üöÄ Lancer la simulation</button>
        </div>

        <div class="explication" id="explication">
            <h3>üí° Explication :</h3>
            <p>
                - <strong>N</strong> : Nombre de s√©ries de tests ‚Üí plus N est grand, plus les r√©sultats seront stables.<br>
                - <strong>M</strong> : Nombre d‚Äôessais par s√©rie ‚Üí influence directement la pr√©cision du taux obtenu.<br>
                - <strong>k</strong> : Position sp√©ciale ‚Üí modifie uniquement la partie ‚Äúsp√©ciale‚Äù du test.<br>
                - <strong>Facteur</strong> : Augmente la probabilit√© sp√©ciale ‚Üí change directement le taux sp√©cial.
            </p>
        </div>

        <div id="resultats"></div>

        <div id="boutons-tests"></div>
        <div id="details-test"></div>
    </div>

    <script>
        let dernierResultat = null;

        function lancerSimulation() {
            const N = parseInt(document.getElementById("N").value);
            const M = parseInt(document.getElementById("M").value);
            const k = parseInt(document.getElementById("k").value);
            const facteur = parseFloat(document.getElementById("facteur").value);

            let proba_base = 1 / N;
            let proba_special = proba_base * facteur;
            if (proba_special > 1) proba_special = 1;

            let resultats = [];
            for (let test = 1; test <= N; test++) {
                let proba = (test === k) ? proba_special : proba_base;
                let succes_local = 0;
                for (let i = 0; i < M; i++) {
                    if (Math.random() < proba) {
                        succes_local++;
                    }
                }
                resultats.push({ test, succes_local, proba });
            }

            dernierResultat = { N, M, k, facteur, resultats };
            afficherResultats(k);
            genererBoutonsTests(N);
        }

        function afficherResultats(testChoisi) {
            let resultats = dernierResultat.resultats;
            let r = resultats.find(r => r.test === testChoisi);

            document.getElementById("resultats").innerHTML = `
                <h2>R√©sultats pour le test ${testChoisi}</h2>
                <p>Succ√®s : ${r.succes_local}</p>
                <p>Taux brut : ${r.succes_local} / ${dernierResultat.M} = ${r.succes_local / dernierResultat.M}</p>
            `;

            document.getElementById("details-test").innerHTML = `
                Test ${testChoisi} : Proba = ${r.proba} (Facteur : ${dernierResultat.facteur})
            `;
        }

        function genererBoutonsTests(N) {
            const container = document.getElementById("boutons-tests");
            container.innerHTML = "";
            for (let i = 1; i <= N; i++) {
                const btn = document.createElement("button");
                btn.textContent = `Test ${i}`;
                btn.className = "bouton-test";
                btn.onclick = () => afficherResultats(i);
                container.appendChild(btn);
            }
        }
    </script>
</body>
</html>
